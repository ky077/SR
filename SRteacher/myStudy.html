<!doctype html>
<html lang="zh-hant-TW">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="SmartReading 適性閱讀 教師端">
<meta name="author" content="SmartReading">
<meta name="generator" content="SmartReading">
<title>SmartReading 教師端</title>
<link rel="shortcut icon" type="image/x-icon" href="Content/images/favicon.ico">
<!-- google fonts -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans:ital,wght@0,100..900;1,100..900&family=Noto+Sans+TC:wght@100..900&display=swap" rel="stylesheet">

<!-- widgets CSS -->
<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/all.min.css">
<link rel="stylesheet" type="text/css" href="Content/widgets/DataTables/datatables.min.css">

<!-- template CSS -->
<link rel="stylesheet" type="text/css" href="Content/css/bootstrap-custom.css">	
<link rel="stylesheet" type="text/css" href="Content/css/SRv3-manager.css">
</head>

<body>

<!-- ------- ------- ------- ------- ------- ------- ------- -->
<main class="border-0 px-3"> 
  <!-- banner start -->
  <div class="myStudy-h1">我的書房</div>
  <div class="page-banner myStudy">
    <div class="container">
      <div class="page-banner__text">
        <h2>3年2班 李秋秋</h2>
      </div>
    </div>
  </div>
  <!-- banner end --> 
  
  <!-- myStudy start -->
  <div class="myStudy">
    <div class="container-fluid">
      <div class="myStudy-block note">
        <div class="row">
          <div class="col-lg-2">
            <div class="myStudy-title">
              <h2>筆記本</h2>
            </div>
          </div>
          <div class="col-lg-10 ps-lg-0">
            <div class="myStudy-content">
              <textarea class="form-control rounded-0" placeholder="快將你的感動或觀察，化為文字記錄下來吧！......" readonly>把我的感動或觀察，化為文字記錄下來！把我的感動或觀察，化為文字記錄下來！把我的感動或觀察，化為文字記錄下來！把我的感動或觀察，化為文字記錄下來！把我的感動或觀察，化為文字記錄下來！</textarea>
            </div>
          </div>
        </div>
      </div>
      <div class="myStudy-block paint">
        <div class="row">
          <div class="col-lg-2">
            <div class="myStudy-title">
              <h2>繪畫</h2>
            </div>
          </div>
          <div class="col-lg-10 ps-lg-0">
            <div class="myStudy-content"> 
              <!-- -->
              <div class="upload-pic">
                <div class="upload-pic__area">
                  <div class="upload-pic__area-default">
                    <div class="upload-pic__area-default__text"> 快將你的感動或觀察化為圖畫記錄下來吧！<img src="Content/images/myStudy/paint-default-img.png" class="img-fluid d-block mx-auto"> </div>
                  </div>
                  <div class="upload-pic__area-answer" style="display: flex;"> <img src="https://smartreading.net/v3/Content/images/index/banner-bg-20240401.jpg" class="img-fluid d-block mx-auto"> </div>
                </div>
              </div>
              <!-- --> 
            </div>
          </div>
        </div>
      </div>
      <div class="myStudy-block audio">
        <div class="row">
          <div class="col-lg-2">
            <div class="myStudy-title">
              <h2>錄音</h2>
            </div>
          </div>
          <div class="col-lg-10 ps-lg-0">
            <div class="myStudy-content"> 
              <!-- -->
              <div class="audioRecord">
                <div class="audioRecord-penal">
                  <div class="progress-progress"> <img src="Content/images/myStudy/audioProgress/sec-60/0.png" alt=""> </div>
                  <div class="progress-effect"> <img src="Content/images/myStudy/audioProgress/effect1.png" alt=""> </div>
                  <div class="progress-count">
                    <label id="label_time">00:00</label>
                  </div>
                </div>
                <div class="audioRecord-tools">
                  <button id="btn_start" class="tools__btn startRec" type="button" onclick="startRec()" disabled="disabled"><i class="fa-solid fa-microphone" aria-hidden="true"></i>開始錄音</button>
                  <button id="btn_stop" class="tools__btn stopRec" type="button" onclick="stopRec()" style="display:none;"><i class="fa-solid fa-stop" aria-hidden="true"></i>停止錄音</button>
                  <button id="btn_play" class="tools__btn playRec" type="button" onclick="playRec()"><i class="fa-solid fa-play" aria-hidden="true"></i>播放錄音</button>
                  <button id="btn_pause" class="tools__btn stopPlayRec" type="button" onclick="" style="display:none;"><i class="fa-solid fa-pause" aria-hidden="true"></i>暫停播放</button>
                </div>
              </div>
              <!-- --> 
            </div>
          </div>
        </div>
      </div>
      <div class="myStudy-block video">
        <div class="row">
          <div class="col-lg-2">
            <div class="myStudy-title">
              <h2>影片</h2>
            </div>
          </div>
          <div class="col-lg-10 ps-lg-0">
            <div class="myStudy-content"> 
              <!-- -->
              <div class="upload-video">
                <div class="upload-video__area">
                  <div class="upload-video__area-default">
                    <div class="upload-video__area-default__text"> 快將你的感動或觀察，化為影像記錄下來吧！<img src="Content/images/myStudy/video-default-img.png" class="img-fluid d-block mx-auto"> </div>
                  </div>
                  <div class="upload-video__area-answer" style="display: ;">
                    <div class="upload-video__area-answer__videoWidth">
                      <iframe src="https://www.youtube.com/embed/rp-FAlPNQIA"></iframe>
                    </div>
                  </div>
                </div>
                <div class="upload-video__btns">
                  <div class="input-group mb-0">
                    <input type="text" class="form-control rounded-0" placeholder="http://" value="https://youtu.be/KD_1Z8iUDho">
                    <button class="btn btn-gray-100 rounded-0 border-gray-400 text-gray-800" type="button" id="">複製</button>
                  </div>
                </div>
              </div>
              <!-- --> 
            </div>
          </div>
        </div>
      </div>
      <div class="grayscale">
        <div class="d-inline mx-1"><img src="Content/images/icon-thumbs.png" alt="" class="me-1"/>1</div>
        <div class="d-inline mx-1"><img src="Content/images/icon-comment.png" alt="" class="me-1"/>0</div>
      </div>
    </div>
  </div>
  <!-- myStudy start --> 
  
  <!-- -->
  <div class="myStudy-footer bg-white">
    <div class="container">
      <div class="d-flex justify-content-center fs-7"> 
        <!---->
        <div class="form-check form-check-inline form-check-thumb mx-2">
          <input class="form-check-input" type="checkbox" value="" id="checkThumb">
          <label class="form-check-label" for="checkThumb">讚</label>
        </div>
        <!---->
        <div class="form-check form-check-inline form-check-feedback mx-2">
          <input class="form-check-input" type="checkbox" value="" id="checkfeedback">
          <label class="form-check-label" for="checkfeedback">回饋</label>
        </div>
        <!---->
        <div class="form-check form-switch form-check-inline form-check-reverse mx-2">
          <input class="form-check-input" type="checkbox" role="switch" id="switchRelease2">
          <label class="form-check-label" for="switchRelease2">發布</label>
        </div>
        <!----> 
      </div>
    </div>
  </div>
  <!-- --> 
</main>
<!-- ------- ------- ------- ------- ------- ------- ------- --> 
<!-- ------- ------- ------- ------- ------- ------- ------- --> 
<!-- ------- ------- ------- ------- ------- ------- ------- --> 
<script src="Content/js/jquery-3.6.0.min.js"></script> 

<!-- widgets JS --> 
<script src="Content/js/bootstrap.bundle.min.js"></script> 
<script src="Content/widgets/DataTables/datatables.min.js"></script> 
<!-- my JS --> 
<script src="Content/js/main.js"></script> 
<script>
$(document).ready(function() {
	//nowPage
  	//$('.navTab-?').addClass('active');
	
	
	//note//for demo 可刪除
	$('.myStudy-block.note .myStudy-content textarea').keydown(function() {
		$_len = $(this).val().length;
		if($_len != 0){
			$(this).parents('.myStudy-content').next('.myStudy-btns').find('button').removeAttr('disabled');
		}else{
			$(this).parents('.myStudy-content').next('.myStudy-btns').find('button').attr('disabled','disabled');
		}
	});
	
	//paint//for demo 可刪除
	$('.myStudy-block.paint .myStudy-btns input[type="file"]').click(function(){
		$(this).parents('.myStudy-btns').prev('.myStudy-content').find('.upload-pic__area-answer').show();
		$(this).parents('.myStudy-btns').find('button').removeAttr('disabled');
	});
	$('.myStudy-block.paint .myStudy-btns button').click(function(){
		if($(this).text()=="繪製"){
			//實際請開起繪圖版
            window.location='palette.html';
		}
	});
	
	//audio 錄音//for demo 請參考效果更換圖片即可。可刪除。
	//圓餅進度條
	var t = 0;
	function countTime(){
		if(t!=59){
			t = t + 1;
			if( t<10 ){
				$('#label_time').text('00:0'+ t );
			}else{
				$('#label_time').text('00:'+ t );
			}
			$('.progress-progress > img').attr('src', 'Content/images/myStudy/audioProgress/sec-60/'+ t +'.png');
			setTimeout(countTime,1000);
		}else{
			$('#label_time').text('01:00');
			$('.progress-progress > img').attr('src', 'Content/images/myStudy/audioProgress/sec-60/'+ 60 +'.png');
			$('.progress-effect > img').attr('src', 'Content/images/myStudy/audioProgress/effect1.png');
		}
	}
	//聲音效果條
	var n = 0;
	function listenTime(){
		n = n + 1;
		$('.progress-effect > img').attr('src', './Content/images/myStudy/audioProgress/effect'+ n +'.png');
		setTimeout(listenTime,500);
		if(n == 2){
			n = 0;
		}	
	}
	//開始錄音動作//舊版是倒數，新UI設計為開始計時...
	$('.audioRecord .tools__btn.startRec').click(function(){ 
		//效果顯示
		countTime();
		listenTime();
		//按鈕更換(開始錄音→停止錄音)
		$(this).html('<i class="fa-solid fa-stop" aria-hidden="true"></i>停止錄音')
		       .removeClass('startRec')
			   .addClass('stopRec');
		//停止錄音動作
		$('.audioRecord .tools__btn.stopRec').click(function(){
			clearTimeout(countTime);
			countTime=0;
			clearTimeout(listenTime);
			listenTime=0; //好像lag...
			$(this).html('<i class="fa-solid fa-microphone" aria-hidden="true"></i>開始錄音')
		       	   .removeClass('stopRec')
			       .addClass('startRec');
			$('.audioRecord .tools__btn.playRec').removeAttr('disabled');
			$(this).parents('.myStudy-block').find('.myStudy-btns button').removeAttr('disabled');
		});
	});
	//開始播放動作
	$('.audioRecord .tools__btn.playRec').click(function(){  console.log('00')
		//秒數效果顯示
		//......同錄音效果 圓餅一秒換圖、音效0.5秒換圖
		//按鈕更換開始播放→停止播放)
		$(this).html('<i class="fa-solid fa-pause" aria-hidden="true"></i>暫停播放')
		       .removeClass('playRec')
			   .addClass('stopPlayRec');
		//停止播放動作
		$('.audioRecord .tools__btn.topPlayRec').click(function(){
			//......
			$(this).html('<i class="fa-solid fa-play" aria-hidden="true"></i>播放錄音')
		       	   .removeClass('stopPlayRec')
			       .addClass('playRec');
			$('.audioRecord .tools__btn.playRec').removeAttr('disabled');
			$(this).parents('.myStudy-block').find('.myStudy-btns button').removeAttr('disabled');
		});	});
	
	//video//for demo 可刪除
	$('.myStudy-block.video .myStudy-btns button').click(function(){
		if($(this).text()=="預覽"){
			$(this).parents('.myStudy-btns').prev('.myStudy-content').find('.upload-video__area-answer').show();
			$(this).parents('.myStudy-btns').find('button').removeAttr('disabled');
		}
	});
	
	//all送出
	$('.myStudy-block .myStudy-btns .text-right button').click(function(){
		if($(this).text()=="暫存"){
			$(this).parents('.myStudy-btns').prev('.myStudy-content').find('.default-block').hide();
			$(this).parents('.myStudy-btns').prev('.myStudy-content').find('.answer-block').show();
		}
		if($(this).text()=="送出"){
			$(this).parents('.myStudy-btns').prev('.myStudy-content').find('.default-block').hide();
			$(this).parents('.myStudy-btns').prev('.myStudy-content').find('.answer-block').show();
			$(this).parents('.myStudy-block').find('.myStudy-teacher-score > label').html('<span class="userScore failed bySystem">待</span>').show();
		}
	});
    
    //for demo
    let user    = GetQueryString('user'),
        sWrite  = GetQueryString('sWrite'),
        tReview = GetQueryString('tReview'),
        tShow   = GetQueryString('tShow');
    
    //demo學生填寫區 內容
    if(sWrite){
        if(sWrite.includes('n')){
            $('.note').find('.myStudy-content textarea').text('一二三四五一二三四五一二三四五一二三四五一二三四五一二三四五一二三四五一二三四五一二三四五一二三四五一二三四五一二三四五');
        }
        if(sWrite.includes('p')){
            $('.paint').find('.upload-pic__area-default').hide();
            $('.paint').find(' .upload-pic__area-answer').show();
        }
        if(sWrite.includes('a')){
            $('.audio').find('.progress-progress').html(`<img src="Content/images/myStudy/audioProgress/sec-60/6.png">`);
            $('.audio').find('#label_time').text('00:06') 
            $('.audio').find('#btn_play').prop('disabled', false);
        }
        if(sWrite.includes('v')){
            $('.video').find('.upload-video__area-default').hide();
            $('.video').find(' .upload-video__area-answer').show();
            $('.video').find('.video-httpInput input').val('https://www.youtube.com/');
        }   
    }
    
    //demo學生填寫區 狀態
    if(user == 's'){
        $('.myStudy-content').find('textarea, input, button').prop('disabled', false);
        $('#btn_play').prop('disabled', true);
    }else if(user == 't'){
        $('.myStudy-content').find('textarea, input, button').prop('disabled', true);
        $('#btn_play').prop('disabled', false);
    }
    
    //教師分數區
    if(user == 't'){
        $('.myStudy-teacher-score label').html('<input class="form-control input-inline" style="width:50px;"> / 25').show(); 
    }    
    
    //demo學生按鈕區&教師分數區
    let sWriteArray = sWrite.split('');
    let _this;
    
    for(let i=0; i<sWriteArray.length; i++){
        switch (sWriteArray[i]) {
            case 'n':
                _this = $('.note');
                break;
            case 'p':
                _this = $('.paint');
                break;
            case 'a':
                _this = $('.audio');
                break;
            case 'v':
                _this = $('.video');
                break;
            default:
                break;    
        }
        
        if(user == 's'){
            //學生按鈕區
            _this.find('.myStudy-btns').find('button, input').prop('disabled', false); 
            
            //教師分數區
            if(sWrite.includes( sWriteArray[i] )){ 
                if(tReview.includes( sWriteArray[i] )){
                    _this.find('.myStudy-teacher-score label').html('20 / 25').show();   
                }else{
                    _this.find('.myStudy-teacher-score label').html('<span class="userScore failed bySystem">待</span>').show();
                }
            } 
        }else if(user == 't'){
            //學生按鈕區
            $('.myStudy-btns').find('button, input').prop('disabled', true); 
            $('#uploadPic').parents('label').addClass('disabled'); 
            
            //教師分數區
            if(sWrite.includes( sWriteArray[i] )){ console.log(sWriteArray[i])
                if(tReview.includes( sWriteArray[i] )){
                    _this.find('.myStudy-teacher-score label').html('<input class="form-control input-inline" style="width:50px;" value="20"> / 25').show();        
                }else{
                    _this.find('.myStudy-teacher-score label').html('<input class="form-control input-inline" style="width:50px;"> / 25').show();  
                }
            }
        }
    }
    
    //demo教師評語區
    if(tReview){
        if(tReview.includes('n')){
            $('.note').find('.myStudy-teacher-comments textarea').val('教師評語短。');
        }
        if(tReview.includes('p')){
            $('.paint').find('.myStudy-teacher-comments textarea').val('教師評語適中教師評語適中教師評語適中教師評語適中教師評語適中教師評語適中教師評語適中教師評語適中。');
        }
        if(tReview.includes('a')){
            $('.audio').find('.myStudy-teacher-comments textarea').val('教師評語適中教師評語適中教師評語適中教師評語適中教師評語適中教師評語適中教師評語適中教師評語適中教師評語適中教師評語適中教師評語適中教師評語適中');
        }
        if(tReview.includes('v')){
            $('.video').find('.myStudy-teacher-comments textarea').val('教師評語爆長教師評語爆長教師評語爆長教師評語爆長教師評語爆長教師評語爆長教師評語爆長教師評語爆長教師評語爆長教師評語爆長教師評語爆長教師評語爆長教師評語爆長教師評語爆長教師評語爆長教師評語爆長教師評語爆長教師評語爆長教師評語爆長教師評語爆長教師評語爆長教師評語爆長教師評語爆長教師評語爆長教師評語爆長教師評語爆長教師評語爆長教師評語爆長教師評語爆長教師評語爆長教師評語爆長教師評語爆長教師評語爆長教師評語爆長教師評語爆長教師評語爆長教師評語爆長教師評語爆長教師評語爆長教師評語爆長教師評語爆長教師評語爆長教師評語爆長。');
        }   
    }
    
    if(user == 's'){
        $('.myStudy-teacher-comments textarea').prop('disabled', true);
    }else if(user == 't'){
        $('.myStudy-teacher-comments textarea').prop('disabled', false);
    }
    
    //demo我的書房各別顯示(教師端)
    if(user == 't'){
        $('.myStudy-block.'+tShow).show().siblings().hide();
    }
    
    //最下方按鈕曲
    if(user == 's'){
        $('.myStudy-footer .container').html(`
            <button class="btn btn-lg btn-default" type="button" onclick="goBack()">回閱讀計畫</button>
            <button class="btn btn-lg btn-main" type="submit">完成</button>`);
    }else if(user == 't'){
        $('.myStudy-footer .container').html(`
            <button class="btn btn-lg btn-default" type="button" onclick="goBack()">回篇章計畫</button>
            <button class="btn btn-lg btn-main" type="submit">送出評分</button>  `);
    }
});
    
//回上一頁
function goBack() {
    window.parent.CloseModal();
}    
    
function GetQueryString(name) {
    var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)");
    var r = window.location.search.substr(1).match(reg);
    if (r != null) return unescape(r[2]);
    return null;
}         
</script>
</body>
</html>
