<!doctype html>
<html lang="zh-hant-TW">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="SmartReading 適性閱讀 教師端">
<meta name="author" content="SmartReading">
<meta name="generator" content="SmartReading">
<title>SmartReading 教師端</title>
<link rel="shortcut icon" type="image/x-icon" href="Content/images/favicon.ico">
<!-- google fonts -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans:ital,wght@0,100..900;1,100..900&family=Noto+Sans+TC:wght@100..900&display=swap" rel="stylesheet">

<!-- widgets CSS -->
<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/all.min.css">
<link rel="stylesheet" type="text/css" href="Content/widgets/DataTables/datatables.min.css">

<!-- template CSS -->
<link rel="stylesheet" type="text/css" href="Content/css/bootstrap-custom.css">
<link rel="stylesheet" type="text/css" href="Content/css/SRv3-manager.css">
</head>

<body>
<form>
  <header> </header>
  <div class="container-fluid">
    <div class="row">
      <nav id="sidebarMenu" class="col-xl-2 d-xl-block bg-white sidebar collapse"> </nav>
      <main class="col-xl-10"> 
        <!-- ------- ------- ------- ------- ------- ------- ------- -->
        <h2 class="SR-h2"><span>學生作品管理</span></h2>
        <div class="row py-3 py-xl-5 px-1 px-xl-4"> 
          <!-- 搜尋 start -->
          <div class="col-xl-12 mb-3" id="blockSearch">
            <div class="row g-2 align-items-center justify-content-between">
              <div class="col-auto">
                <div class="row gy-1">
                  <div class="col-auto">
                    <div class="row g-2 align-items-center">
                      <div class="col-auto">
                        <label for="searchClassGrade" class="col-form-label fs-8">時間</label>
                      </div>
                      <div class="col-auto">
                        <input type="date" class="form-control rounded-0 form-select-sm" id="" value="----/--/--">
                      </div>
                      <div class="col-auto">
                        <label class="col-form-label fs-8">至</label>
                      </div>
                      <div class="col-auto">
                        <input type="date" class="form-control rounded-0 form-select-sm" id="" value="----/--/--">
                      </div>
                    </div>
                  </div>
                  <div class="col-auto">
                    <div class="row g-2 align-items-center">
                      <div class="col-auto">
                        <label for="searchSessions" class="col-form-label fs-8">類別</label>
                      </div>
                      <div class="col-auto">
                        <select class="form-select rounded-0 form-select-sm form-select-arrow-sm" id="searchSessions">
                          <option value="" disabled selected>請選擇...</option>
                          <option value="系統題本">系統題本</option>
                          <option value="我的書房">我的書房</option>
                        </select>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-auto">
                <div class="row gy-2 align-items-center">
                  <div class="col-auto">
                    <div class="row g-2 align-items-center">
                      <div class="col-auto">
                        <label for="searchKeywords" class="col-form-label fs-7">搜尋</label>
                      </div>
                      <div class="col-auto">
                        <div class="input-group">
                          <div class="input-group-clear">
                            <input type="text" class="form-control rounded-0" placeholder="請輸入關鍵字..." aria-label="請輸入關鍵字..." aria-describedby="btnSearch" id="searchKeywords">
                            <button class="btn btn-close" type="button"></button>
                          </div>
                          <button class="btn btn-gray-100 rounded-0 border-gray-400 text-primary lh-1" type="button" id="btnSearch"><i class="fa-solid fa-magnifying-glass fs-5 mx-n1"></i></button>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!-- 搜尋  end  --> 
          <!-- 表格 start -->
          <div class="col-xl-12 mb-5">
            <table class="table table-bordered table-courseActivity" id="courseActivityTable">
              <thead>
                <tr>
                  <th scope="col" class="col-index">序號</th>
                  <th scope="col" class="col-grade">年級</th>
                  <th scope="col" class="col-class">班級</th>
                  <th scope="col" class="col-studentName">姓名</th>
                  <th scope="col" class="col-bookTitle">書名</th>
                  <th scope="col" class="col-topicType">類別</th>
                  <th scope="col" class="col-scroeComp">分數/完成度</th>
                  <th scope="col" class="col-likeCmt">讚/留言</th>
                  <th scope="col" class="col-tool">我的操作</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td class="col-index">1</td>
                  <td class="col-grade">3</td>
                  <td class="col-class">2</td>
                  <td class="col-studentName">李秋秋</td>
                  <td class="col-bookTitle">單車迷魂記</td>
                  <td class="col-topic">系統題本</td>
                  <td class="col-scroeComp"><span class="userScore passed byTeacher">A+</span></td>
                  <td class="col-likeCmt"><div class="d-inline mx-1"><img src="Content/images/icon-thumbs.png" alt="" class="me-1"/>1</div>
                    <div class="d-inline mx-1"><img src="Content/images/icon-comment.png" alt="" class="me-1"/>0</div></td>
                  <td class="col-tool"><button type="button" class="btn btn-outline-primary bg-gradient px-2" data-review="sysTopic"><img src="Content/images/icon-eye.png" alt="" class="me-1"/>查看</button>
                    <div class="form-check form-check-inline form-check-thumb mx-3">
                      <input class="form-check-input" type="checkbox" value="" id="checkThumb1" checked>
                      <label class="form-check-label" for="checkThumb1">讚</label>
                    </div>
                    <div class="form-check form-switch form-check-inline form-check-reverse pe-0">
                      <input class="form-check-input" type="checkbox" role="switch" id="switchRelease1">
                      <label class="form-check-label me-1" for="switchRelease1">發布</label>
                    </div></td>
                </tr>
                <tr>
                  <td class="col-index">2</td>
                  <td class="col-grade">3</td>
                  <td class="col-class">2</td>
                  <td class="col-studentName">李秋秋</td>
                  <td class="col-bookTitle">單車迷魂記</td>
                  <td class="col-topic">我的書房</td>
                  <td class="col-scroeComp"><div><img src="Content/images/RPList/myStudy-note-done.png" alt="">&nbsp;<img src="Content/images/RPList/myStudy-paint-done.png" alt="">&nbsp;<img src="Content/images/RPList/myStudy-audio.png" alt="">&nbsp;<img src="Content/images/RPList/myStudy-video.png" alt=""></div></td>
                  <td class="col-likeCmt"><div class="d-inline mx-1"><img src="Content/images/icon-thumbs.png" alt="" class="me-1"/>0</div>
                    <div class="d-inline mx-1"><img src="Content/images/icon-comment.png" alt="" class="me-1"/>0</div></td>
                  <td class="col-tool"><button type="button" class="btn btn-outline-primary bg-gradient px-2" data-review="myStudy"><img src="Content/images/icon-eye.png" alt="" class="me-1"/>查看</button>
                    <div class="form-check form-check-inline form-check-thumb mx-3">
                      <input class="form-check-input" type="checkbox" value="" id="checkThumb2" checked>
                      <label class="form-check-label" for="checkThumb2">讚</label>
                    </div>
                    <div class="form-check form-switch form-check-inline form-check-reverse pe-0">
                      <input class="form-check-input" type="checkbox" role="switch" id="switchRelease2">
                      <label class="form-check-label me-1" for="switchRelease2">發布</label>
                    </div></td>
                </tr>
              </tbody>
            </table>
          </div>
          <!-- 表格  end  --> 
        </div>
        <!-- ------- ------- ------- ------- ------- ------- ------- --> 
      </main>
    </div>
  </div>
  
  <!-- Modal#reviewModal 我的操作[查看]  系統題本/教師命題/我的書房 start -->
  <div class="modal fade modal-review" id="reviewModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="reviewModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl modal-dialog-centered">
      <div class="modal-content rounded-0">
        <div class="modal-header">
          <button type="button" class="btn-close float-start" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <div class="load-body">...</div>
        </div>
      </div>
    </div>
  </div>
  <!-- Modal#reviewModal 我的操作[查看]  系統題本/教師命題/我的書房  end  -->
  
  <footer> </footer>
</form>
<!-- ------- ------- ------- ------- ------- ------- ------- --> 
<!-- ------- ------- ------- ------- ------- ------- ------- --> 
<!-- ------- ------- ------- ------- ------- ------- ------- --> 
<script src="Content/js/jquery-3.6.0.min.js"></script> 

<!-- widgets JS --> 
<script src="Content/js/bootstrap.bundle.min.js"></script> 
<script src="Content/js/doubleScorollbar.js"></script> 
<script src="Content/widgets/DataTables/datatables.min.js"></script> 
<script src="Content/widgets/DataTables/buttons-2.4.2/js/dataTables.buttons.min.js"></script> 
<script src="Content/widgets/DataTables/buttons-2.4.2/js/buttons.html5.min.js"></script> 
<script src="Content/widgets/DataTables/buttons-2.4.2/js/buttons.print.min.js"></script> 
<script src="Content/widgets/bootstrap-select-1.14.0-beta3/dist/js/bootstrap-select.min.js"></script> 

<!-- my JS --> 
<script src="Content/js/main.js"></script> 
<script>
$(document).ready(function () {
  //call header、footer、 sidebar  
  $('header').load('master_header.html', function () {
    //當前頁名稱顯示
    $('#currentPage').html($('main .SR-h2').html());
  });
  $('footer').load('master_footer.html');
  $('#sidebarMenu').load('master_sidebar.html', function () {
    //當前頁actvie
    $('#sidebarMenu .nav-link[href*="RP-courseActivity"]').addClass('active');
  });

  const $table = $('#courseActivityTable');
  //datatables 
  $table.DataTable({
    //serverSide: true,
    order: [], //取消默認排序icon
    ordering: false,
    autoWidth: false,
    responsive: false,
    searching: true,
    pageLength: 10,
    pagingType: "simple_numbers",
    dom: '<"table-responsive"rt>'
      + '<"datatables-custom-footer clearfix"pi>',
    language: {
      url: 'Content/widgets/DataTables/lang/Chinese-traditional.json'
    },
    ajax: 'Content/json/RP-courseActivity/courseActivity.json',
    columnDefs: [{ //序號
        targets: 0,
        title: '序號',
        className: 'col-index',
        type: 'numeric',
        render: function (data, type, row, meta) {
          return meta.row + 1;
        }
      },
      { //年級 
        targets: 1,
        title: '年級',
        data: 'grade',
        className: 'col-grade',
        type: 'numeric',
      },
      { //班級
        targets: 2,
        title: '班級',
        data: 'class',
        className: 'col-class',
        type: 'string',
      },
      { //姓名
        targets: 3,
        title: '姓名',
        data: 'studentName',
        className: 'col-studentName',
        orderDataType: 'dom-text',
        type: 'string',
      },
      { //書名
        targets: 4,
        title: '書名',
        data: 'bookTitle',
        className: 'col-bookTitle',
        orderDataType: 'dom-text',
        type: 'string',
      },
      { //類別
        targets: 5,
        title: '類別',
        data: 'topicType',
        className: 'col-topicType',
        type: 'string',
        render: function (data, type, row, meta) {
          let topicText;
          switch (data) {
            case 'sysTopic':
              topicText = "系統題本";
              break
            case 'myStudy':
              topicText = "我的書房";
              break
            default:
              topicText = "";
              break
          }
          return topicText;
        }
      },
      { //分數/完成度
        targets: 6,
        title: '分數/完成度',
        className: 'col-scroeComp',
        type: 'string',
        render: function (data, type, row, meta) {
          if (row.topicType === 'sysTopic') {
            return `<span class="userScore passed byTeacher">${row.scroe || '-'}</span>`;
          } else if (row.topicType === 'myStudy') {
            // 預設圖片清單，順序為：note、paint、audio、video
            const imgNames = ['note', 'paint', 'audio', 'video'];
            let compIcons = '';

            for (let i = 0; i < imgNames.length; i++) {
              const status = row.Comp[i] === 1 ? '-done' : '';
              compIcons += `<img src="Content/images/RPList/myStudy-${imgNames[i]}${status}.png" alt="" class="me-1"/>`;
            }

            return `<div>${compIcons}</div>`;
          }
          return '---';
        }
      },
      { //讚/留言
        targets: 7,
        title: '讚/留言',
        className: 'col-likeCmt',
        type: 'string',
        render: function (data, type, row, meta) {
          return `<div class="d-inline mx-1"><img src="Content/images/icon-thumbs.png" alt="" class="me-1"/>${row.like || 0}</div>
                  			<div class="d-inline mx-1"><img src="Content/images/icon-comment.png" alt="" class="me-1"/> ${row.Cmt || 0}</div>`;
        }
      },
      { //我的操作
        targets: 8,
        title: '我的操作',
        className: 'col-tool',
        type: 'string',
        render: function (data, type, row, meta) {
          return `<button type="button" class="btn btn-outline-primary bg-gradient px-2" data-review="${row.topicType}">
							  <img src="Content/images/icon-eye.png" alt="" class="me-1"/>查看
							</button>
							<div class="form-check form-check-inline form-check-thumb mx-3">
							  <input class="form-check-input" type="checkbox" value="" id="checkThumb${row.sn}">
							  <label class="form-check-label" for="checkThumb${row.sn}">讚</label>
							</div>
							<div class="form-check form-switch form-check-inline form-check-reverse pe-0">
							  <input class="form-check-input" type="checkbox" role="switch" id="switchRelease${row.sn}">
						      <label class="form-check-label me-1" for="switchRelease${row.sn}">發布</label>
							</div>`;
          //老師有按讚，我的操作>讚才會checked
        }
      }
    ],
    initComplete: function () {
      //datatable footer input page
      datatableInputPage($table);
    }
  });

  //[查看]
  $table.on('click', '[data-review]', function () {
    var _target = $(this).attr('data-review');

    $('#reviewModal').on('shown.bs.modal', function (e) {
      switch (_target) {
        case "sysTopic":
          $(this).find('.load-body').load('fillAssessment-bySystem.html');
          break;

        case "myStudy":
          $(this).find('.load-body').load('myStudy.html');
          break;

        default:
          break;
      }
    }).modal('show');

    //#reviewModal 關閉時清空
    $('#reviewModal').on('hidden.bs.modal', function () {
      $(this).find('.load-body').html('');
    });
  });
});
</script>
</body>
</html>
