<!doctype html>
<html lang="zh-tw">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="SmartReading 適性閱讀">
<meta name="author" content="SmartReading 適性閱讀">
<title>SmartReading 適性閱讀</title>
<link rel="shortcut icon" type="image/x-icon" href="../Content/images/SR.ico">
<link rel="stylesheet" type="text/css" href="../Content/css/bootstrap-lg.min.css">
<link rel="stylesheet" type="text/css" href="../Content/css/ie10-viewport-bug-workaround.css">
<link rel="stylesheet" type="text/css" href="../Content/widgets/fontawesome-free-5.15.3-web/css/all.css">

<!-- this page widgets CSS -->

<!-- SR core CSS -->
<link rel="stylesheet" type="text/css" href="../Content/css/promote-styles.css">
</head>

<body>

<!-- ------- ------- ------- ------- ------- ------- ------- -->
<main> 
  <!-- banner start -->
  <div class="page-banner myStudy">
    <div class="container">
      <div class="page-banner__text">
        <div class="row">
          <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
            <h1>我的書房</h1>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- banner end --> 
  
  <!-- myStudy start -->
  <div class="myStudy">
    <div class="container-fluid">
      <div class="myStudy-block note">
        <div class="row">
          <div class="col-sm-2">
            <div class="myStudy-title">
              <h2>筆記本</h2>
            </div>
          </div>
          <div class="col-sm-7">
            <div class="myStudy-content">
              <textarea class="form-control noRadius" placeholder="快將你的感動或觀察，化為文字記錄下來吧！......"></textarea>
            </div>
            <div class="myStudy-btns">
              <div class="row">
                <div class="col-xs-12 col-sm-7 col-md-8 text-left">
                </div>
                <div class="col-xs-12 col-sm-5 col-md-4 text-right">
                  <button class="btn btn-lg btn-default-main" type="button" disabled onClick="window.alert('已成功暫存。')">暫存</button>
                  <button class="btn btn-lg btn-main" type="submit" disabled onClick="window.alert('已成功送出。')">送出</button>
                </div>
              </div>
            </div>
          </div>
          <div class="col-sm-3">
            <div class="myStudy-teacher-title">
              教師評量
            </div>
            <div class="myStudy-teacher-score">
              分數：
              <label style="display:none;"><span class="userScore failed bySystem">待</span><input class="form-control input-inline" style="width:50px;" value="">/25</label>
            </div>
            <div class="myStudy-teacher-comments">
              <div class="myStudy-teacher-comments__title">
                評語：
              </div>
              <textarea class="form-control noRadius" placeholder="" disabled></textarea>
            </div>
          </div>
        </div>
      </div>
      <div class="myStudy-block paint">
        <div class="row">
          <div class="col-sm-2">
            <div class="myStudy-title">
              <h2>繪畫</h2>
            </div>
          </div>
          <div class="col-sm-7">
            <div class="myStudy-content">
              <!-- -->
              <div class="upload-pic">
                <div class="upload-pic__area">
                  <div class="upload-pic__area-default">
                    <div class="upload-pic__area-default__text">
                      快將你的感動或觀察化為圖畫記錄下來吧！<img src="../Content/images/myStudy/paint-default-img.png" class="img-responsive center-block">
                    </div>
                  </div>
                  <div class="upload-pic__area-answer" style="display:none;">
                    <img src="../Content/images/news/1.jpg" class="img-responsive center-block">
                  </div>
                </div>
              </div>
              <!-- -->
            </div>
            <div class="myStudy-btns">
              <div class="row">
                <div class="col-xs-12 col-sm-7 col-md-8 text-left">
                  <button class="btn btn-lg btn-default-main" type="button">繪製</button>
                  <label class="btn btn-lg btn-main">
                    <input id="uploadPic" type="file" accept=".jpg" onchange="" style="display:none;">
                    <span id="info_4">上傳圖檔</span> </label>
                </div>
                <div class="col-xs-12 col-sm-5 col-md-4 text-right">
                  <button class="btn btn-lg btn-default-main" type="button" disabled onClick="window.alert('已成功暫存。')">暫存</button>
                  <button class="btn btn-lg btn-main" type="submit" disabled onClick="window.alert('已成功送出。')">送出</button>
                </div>
              </div>
            </div>
          </div>
          <div class="col-sm-3">
            <div class="myStudy-teacher-title">
              教師評量
            </div>
            <div class="myStudy-teacher-score">
              分數：
              <label style="display:none;"><span class="userScore failed bySystem">待</span><input class="form-control input-inline" style="width:50px;" value="">/25</label>
            </div>
            <div class="myStudy-teacher-comments">
              <div class="myStudy-teacher-comments__title">
                評語：
              </div>
              <textarea class="form-control noRadius" placeholder="" disabled></textarea>
            </div>
          </div>
        </div>
      </div>
      <div class="myStudy-block audio">
        <div class="row">
          <div class="col-sm-2">
            <div class="myStudy-title">
              <h2>錄音</h2>
            </div>
          </div>
          <div class="col-sm-7">
            <div class="myStudy-content">
              <!-- -->
              <div class="audioRecord">
                <div class="audioRecord-penal">
                  <div class="progress-progress">
                    <img src="../Content/images/myStudy/audioProgress/sec-60/0.png">
                  </div>
                  <div class="progress-effect">
                    <img src="../Content/images/myStudy/audioProgress/effect1.png">
                  </div>
                  <div class="progress-count">
                    <label id="label_time">00:00</label>
                  </div>
                </div>
                <div class="audioRecord-tools">
                  <button id="btn_start" class="tools__btn startRec" type="button" onclick="startRec()"><i class="fas fa-microphone"></i>開始錄音</button>
                  <button id="btn_stop" class="tools__btn stopRec" type="button" onclick="stopRec()" style="display:none;"><i class="glyphicon glyphicon-stop" aria-hidden="true"></i>停止錄音</button>
                  <button id="btn_play" class="tools__btn playRec" type="button" onclick="playRec()" disabled="disabled"><i class="glyphicon glyphicon-play" aria-hidden="true"></i>播放錄音</button>
                  <button id="btn_play" class="tools__btn stopPlayRec" type="button" onclick="" style="display:none;"><i class="glyphicon glyphicon-step-forward" aria-hidden="true"></i>停止播放</button>
                </div>
              </div>
              <!-- --> 
              <!--預設start--> 
              <!--<div class="default-block" style="">
                
              </div>--> 
              <!--預設end--> 
              <!-- default-block/answer-block 版沒差，可只存在一個class或class="default-block answer-block"--> 
              <!--學生作答start--> 
              <!--<div class="answer-block" style="display:none;">
                <div class="audioRecord">
                  <div class="audioRecord-penal">
                    <div class="progress-progress">
                      <img src="../Content/images/myStudy/audioProgress/sec-60/54.png">
                    </div>
                    <div class="progress-effect">
                      <img src="../Content/images/myStudy/audioProgress/effect1.png">
                    </div>
                    <div class="progress-count">
                    	<label id="label_time">00:54</label>
                    </div>
                  </div>
                  <div class="audioRecord-tools">
                      <button id="btn_start" class="tools__btn startRec" type="button" onclick="startRec()"><i class="fas fa-microphone"></i>開始錄音</button>
                      <button id="btn_stop" class="tools__btn stopRec" type="button" onclick="stopRec()" style="display:none;"><i class="glyphicon glyphicon-stop" aria-hidden="true"></i>停止錄音</button>
                      <button id="btn_play" class="tools__btn playRec" type="button" onclick="playRec()"><i class="glyphicon glyphicon-play" aria-hidden="true"></i>播放錄音</button>
                      <button id="btn_play" class="tools__btn stopPlayRec" type="button" onclick="" style="display:none;"><i class="glyphicon glyphicon-step-forward" aria-hidden="true"></i>停止播放</button>
                 </div>
                </div>
              </div>--> 
              <!--學生作答start-->
            </div>
            <div class="myStudy-btns">
              <div class="row">
                <div class="col-xs-12 col-sm-7 col-md-8 text-left">
                  <div class="myStudy-remark">
                    *錄音時間限制1分鐘內。
                  </div>
                </div>
                <div class="col-xs-12 col-sm-5 col-md-4 text-right">
                  <button class="btn btn-lg btn-default-main" type="button" disabled onClick="window.alert('已成功暫存。')">暫存</button>
                  <button class="btn btn-lg btn-main" type="submit" disabled onClick="window.alert('已成功送出。')">送出</button>
                </div>
              </div>
            </div>
          </div>
          <div class="col-sm-3">
            <div class="myStudy-teacher-title">
              教師評量
            </div>
            <div class="myStudy-teacher-score">
              分數：
              <label style="display:none;"><span class="userScore failed bySystem">待</span>
                <input class="form-control input-inline" style="width:50px;" value="">/25</label>
            </div>
            <div class="myStudy-teacher-comments">
              <div class="myStudy-teacher-comments__title">
                評語：
              </div>
              <textarea class="form-control noRadius" placeholder="" disabled></textarea>
            </div>
          </div>
        </div>
      </div>
      <div class="myStudy-block video">
        <div class="row">
          <div class="col-sm-2">
            <div class="myStudy-title">
              <h2>影片</h2>
            </div>
          </div>
          <div class="col-sm-7">
            <div class="myStudy-content">
              <!-- -->
              <div class="upload-video">
                <div class="upload-video__area">
                  <div class="upload-video__area-default">
                    <div class="upload-video__area-default__text">
                      快將你的感動或觀察，化為影像記錄下來吧！<img src="../Content/images/myStudy/video-default-img.png" class="img-responsive center-block">
                    </div>
                  </div>
                  <div class="upload-video__area-answer" style="display:none;">
                    <div class="upload-video__area-answer__videoWidth">
                      <div class="embed-responsive embed-responsive-56pre">
                        <iframe class="embed-responsive-item" src="https://www.youtube.com/embed/rp-FAlPNQIA"></iframe>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="upload-video__btns">
                  <div class="input-group">
                    <input type="text" class="form-control noRadius" placeholder="http://" value="https://youtu.be/KD_1Z8iUDho">
                    <span class="input-group-btn">
                    <button class="btn btn-default noRadius" type="button" id="">預覽</button>
                    </span>
                  </div>
                </div>
              </div>
              <!-- -->
            </div>
            <div class="myStudy-btns">
              <div class="row">
                <div class="col-xs-12 col-sm-7 col-md-8 text-left">
                  <div class="input-group input-group-lg video-httpInput">
                    <input type="text" class="form-control noRadius" placeholder="http://" value="">
                    <span class="input-group-btn">
                    <button class="btn btn-default noRadius" type="button" id="">預覽</button>
                    </span>
                  </div>
                </div>
                <div class="col-xs-12 col-sm-5 col-md-4 text-right">
                  <button class="btn btn-lg btn-default-main" type="button" disabled onClick="window.alert('已成功暫存。')">暫存</button>
                  <button class="btn btn-lg btn-main" type="submit" disabled onClick="window.alert('已成功送出。')">送出</button>
                </div>
              </div>
            </div>
          </div>
          <div class="col-sm-3">
            <div class="myStudy-teacher-title">
              教師評量
            </div>
            <div class="myStudy-teacher-score">
              分數：
              <label style="display:none;"><span class="userScore failed bySystem">待</span><input class="form-control input-inline" style="width:50px;" value="">/25</label>
            </div>
            <div class="myStudy-teacher-comments">
              <div class="myStudy-teacher-comments__title">
                評語：
              </div>
              <textarea class="form-control noRadius" placeholder="" disabled></textarea>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- myStudy start --> 
  
  <!-- -->
  <div class="myStudy-footer">
    <div class="container">
      <button class="btn btn-lg btn-default" type="button" onclick="goBack()">回閱讀計畫</button>
      <button class="btn btn-lg btn-main" type="submit">完成</button>
        
      <button class="btn btn-lg btn-default" type="button" onclick="goBack()">回篇章計畫</button>
      <button class="btn btn-lg btn-main" type="submit">送出評分</button>  
    </div>
  </div>
  <!-- --> 
</main>
<!-- ------- ------- ------- ------- ------- ------- ------- --> 

<!-- ------- ------- ------- ------- ------- ------- ------- --> 
<!-- ------- ------- ------- ------- ------- ------- ------- --> 
<!-- ------- ------- ------- ------- ------- ------- ------- --> 
<script src="../Script/jquery.min.js"></script> 
<script src="../Script/bootstrap-lg.min.js"></script> 
<script src="../Script/ie10-viewport-bug-workaround.js"></script> 
<!-- widgets js --> 
<script>
$(document).ready(function() {
	//nowPage
  	//$('.navTab-?').addClass('active');
	
	
	//note//for demo 可刪除
	$('.myStudy-block.note .myStudy-content textarea').keydown(function() {
		$_len = $(this).val().length;
		if($_len != 0){
			$(this).parents('.myStudy-content').next('.myStudy-btns').find('button').removeAttr('disabled');
		}else{
			$(this).parents('.myStudy-content').next('.myStudy-btns').find('button').attr('disabled','disabled');
		}
	});
	
	//paint//for demo 可刪除
	$('.myStudy-block.paint .myStudy-btns input[type="file"]').click(function(){
		$(this).parents('.myStudy-btns').prev('.myStudy-content').find('.upload-pic__area-answer').show();
		$(this).parents('.myStudy-btns').find('button').removeAttr('disabled');
	});
	$('.myStudy-block.paint .myStudy-btns button').click(function(){
		if($(this).text()=="繪製"){
			//實際請開起繪圖版
            window.location='palette.html';
		}
	});
	
	//audio 錄音//for demo 請參考效果更換圖片即可。可刪除。
	//圓餅進度條
	var t = 0;
	function countTime(){
		if(t!=59){
			t = t + 1;
			if( t<10 ){
				$('#label_time').text('00:0'+ t );
			}else{
				$('#label_time').text('00:'+ t );
			}
			$('.progress-progress > img').attr('src', '../Content/images/myStudy/audioProgress/sec-60/'+ t +'.png');
			setTimeout(countTime,1000);
		}else{
			$('#label_time').text('01:00');
			$('.progress-progress > img').attr('src', '../Content/images/myStudy/audioProgress/sec-60/'+ 60 +'.png');
			$('.progress-effect > img').attr('src', '../Content/images/myStudy/audioProgress/effect1.png');
		}
	}
	//聲音效果條
	var n = 0;
	function listenTime(){
		n = n + 1;
		$('.progress-effect > img').attr('src', '../Content/images/myStudy/audioProgress/effect'+ n +'.png');
		setTimeout(listenTime,500);
		if(n == 2){
			n = 0;
		}	
	}
	//開始錄音動作//舊版是倒數，新UI設計為開始計時...
	$('.audioRecord .tools__btn.startRec').click(function(){ 
		//效果顯示
		countTime();
		listenTime();
		//按鈕更換(開始錄音→停止錄音)
		$(this).html('<i class="glyphicon glyphicon-stop" aria-hidden="true"></i>停止錄音')
		       .removeClass('startRec')
			   .addClass('stopRec');
		//停止錄音動作
		$('.audioRecord .tools__btn.stopRec').click(function(){
			clearTimeout(countTime);
			countTime=0;
			clearTimeout(listenTime);
			listenTime=0; //好像lag...
			$(this).html('<i class="fas fa-microphone"></i>開始錄音')
		       	   .removeClass('stopRec')
			       .addClass('startRec');
			$('.audioRecord .tools__btn.playRec').removeAttr('disabled');
			$(this).parents('.myStudy-block').find('.myStudy-btns button').removeAttr('disabled');
		});
	});
	//開始播放動作
	$('.audioRecord .tools__btn.playRec').click(function(){ 
		//秒數效果顯示
		//......同錄音效果 圓餅一秒換圖、音效0.5秒換圖
		//按鈕更換開始播放→停止播放)
		$(this).html('<i class="glyphicon glyphicon-step-forward" aria-hidden="true"></i>停止播放')
		       .removeClass('playRec')
			   .addClass('stopPlayRec');
		//停止播放動作
		$('.audioRecord .tools__btn.topPlayRec').click(function(){
			//......
			$(this).html('<i class="glyphicon glyphicon-play"></i>開始播放')
		       	   .removeClass('stopPlayRec')
			       .addClass('playRec');
			$('.audioRecord .tools__btn.playRec').removeAttr('disabled');
			$(this).parents('.myStudy-block').find('.myStudy-btns button').removeAttr('disabled');
		});	});
	
	//video//for demo 可刪除
	$('.myStudy-block.video .myStudy-btns button').click(function(){
		if($(this).text()=="預覽"){
			$(this).parents('.myStudy-btns').prev('.myStudy-content').find('.upload-video__area-answer').show();
			$(this).parents('.myStudy-btns').find('button').removeAttr('disabled');
		}
	});
	
	//all送出
	$('.myStudy-block .myStudy-btns .text-right button').click(function(){
		if($(this).text()=="暫存"){
			$(this).parents('.myStudy-btns').prev('.myStudy-content').find('.default-block').hide();
			$(this).parents('.myStudy-btns').prev('.myStudy-content').find('.answer-block').show();
		}
		if($(this).text()=="送出"){
			$(this).parents('.myStudy-btns').prev('.myStudy-content').find('.default-block').hide();
			$(this).parents('.myStudy-btns').prev('.myStudy-content').find('.answer-block').show();
			$(this).parents('.myStudy-block').find('.myStudy-teacher-score > label').html('<span class="userScore failed bySystem">待</span>').show();
		}
	});
    
    //for demo
    let user    = GetQueryString('user'),
        sWrite  = GetQueryString('sWrite'),
        tReview = GetQueryString('tReview'),
        tShow   = GetQueryString('tShow');
    
    //demo學生填寫區 內容
    if(sWrite){
        if(sWrite.includes('n')){
            $('.note').find('.myStudy-content textarea').text('一二三四五一二三四五一二三四五一二三四五一二三四五一二三四五一二三四五一二三四五一二三四五一二三四五一二三四五一二三四五');
        }
        if(sWrite.includes('p')){
            $('.paint').find('.upload-pic__area-default').hide();
            $('.paint').find(' .upload-pic__area-answer').show();
        }
        if(sWrite.includes('a')){
            $('.audio').find('.progress-progress').html(`<img src="../Content/images/myStudy/audioProgress/sec-60/6.png">`);
            $('.audio').find('#label_time').text('00:06') 
            $('.audio').find('#btn_play').prop('disabled', false);
        }
        if(sWrite.includes('v')){
            $('.video').find('.upload-video__area-default').hide();
            $('.video').find(' .upload-video__area-answer').show();
            $('.video').find('.video-httpInput input').val('https://www.youtube.com/');
        }   
    }
    
    //demo學生填寫區 狀態
    if(user == 's'){
        $('.myStudy-content').find('textarea, input, button').prop('disabled', false);
        $('#btn_play').prop('disabled', true);
    }else if(user == 't'){
        $('.myStudy-content').find('textarea, input, button').prop('disabled', true);
        $('#btn_play').prop('disabled', false);
    }
    
    //教師分數區
    if(user == 't'){
        $('.myStudy-teacher-score label').html('<input class="form-control input-inline" style="width:50px;"> / 25').show(); 
    }    
    
    //demo學生按鈕區&教師分數區
    let sWriteArray = sWrite.split('');
    let _this;
    
    for(let i=0; i<sWriteArray.length; i++){
        switch (sWriteArray[i]) {
            case 'n':
                _this = $('.note');
                break;
            case 'p':
                _this = $('.paint');
                break;
            case 'a':
                _this = $('.audio');
                break;
            case 'v':
                _this = $('.video');
                break;
            default:
                break;    
        }
        
        if(user == 's'){
            //學生按鈕區
            _this.find('.myStudy-btns').find('button, input').prop('disabled', false); 
            
            //教師分數區
            if(sWrite.includes( sWriteArray[i] )){ 
                if(tReview.includes( sWriteArray[i] )){
                    _this.find('.myStudy-teacher-score label').html('20 / 25').show();   
                }else{
                    _this.find('.myStudy-teacher-score label').html('<span class="userScore failed bySystem">待</span>').show();
                }
            } 
        }else if(user == 't'){
            //學生按鈕區
            $('.myStudy-btns').find('button, input').prop('disabled', true); 
            $('#uploadPic').parents('label').addClass('disabled'); 
            
            //教師分數區
            if(sWrite.includes( sWriteArray[i] )){ console.log(sWriteArray[i])
                if(tReview.includes( sWriteArray[i] )){
                    _this.find('.myStudy-teacher-score label').html('<input class="form-control input-inline" style="width:50px;" value="20"> / 25').show();        
                }else{
                    _this.find('.myStudy-teacher-score label').html('<input class="form-control input-inline" style="width:50px;"> / 25').show();  
                }
            }
        }
    }
    
    //demo教師評語區
    if(tReview){
        if(tReview.includes('n')){
            $('.note').find('.myStudy-teacher-comments textarea').val('教師評語短。');
        }
        if(tReview.includes('p')){
            $('.paint').find('.myStudy-teacher-comments textarea').val('教師評語適中教師評語適中教師評語適中教師評語適中教師評語適中教師評語適中教師評語適中教師評語適中。');
        }
        if(tReview.includes('a')){
            $('.audio').find('.myStudy-teacher-comments textarea').val('教師評語適中教師評語適中教師評語適中教師評語適中教師評語適中教師評語適中教師評語適中教師評語適中教師評語適中教師評語適中教師評語適中教師評語適中');
        }
        if(tReview.includes('v')){
            $('.video').find('.myStudy-teacher-comments textarea').val('教師評語爆長教師評語爆長教師評語爆長教師評語爆長教師評語爆長教師評語爆長教師評語爆長教師評語爆長教師評語爆長教師評語爆長教師評語爆長教師評語爆長教師評語爆長教師評語爆長教師評語爆長教師評語爆長教師評語爆長教師評語爆長教師評語爆長教師評語爆長教師評語爆長教師評語爆長教師評語爆長教師評語爆長教師評語爆長教師評語爆長教師評語爆長教師評語爆長教師評語爆長教師評語爆長教師評語爆長教師評語爆長教師評語爆長教師評語爆長教師評語爆長教師評語爆長教師評語爆長教師評語爆長教師評語爆長教師評語爆長教師評語爆長教師評語爆長教師評語爆長。');
        }   
    }
    
    if(user == 's'){
        $('.myStudy-teacher-comments textarea').prop('disabled', true);
    }else if(user == 't'){
        $('.myStudy-teacher-comments textarea').prop('disabled', false);
    }
    
    //demo我的書房各別顯示(教師端)
    if(user == 't'){
        $('.myStudy-block.'+tShow).show().siblings().hide();
    }
    
    //最下方按鈕曲
    if(user == 's'){
        $('.myStudy-footer .container').html(`
            <button class="btn btn-lg btn-default" type="button" onclick="goBack()">回閱讀計畫</button>
            <button class="btn btn-lg btn-main" type="submit">完成</button>`);
    }else if(user == 't'){
        $('.myStudy-footer .container').html(`
            <button class="btn btn-lg btn-default" type="button" onclick="goBack()">回篇章計畫</button>
            <button class="btn btn-lg btn-main" type="submit">送出評分</button>  `);
    }
});
    
//回上一頁
function goBack() {
    window.parent.CloseModal();
}    
    
function GetQueryString(name) {
    var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)");
    var r = window.location.search.substr(1).match(reg);
    if (r != null) return unescape(r[2]);
    return null;
}         
</script>
</body>
</html>

