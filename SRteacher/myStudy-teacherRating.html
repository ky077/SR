<!doctype html>
<html lang="zh-hant-TW">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="SmartReading 適性閱讀 教師端">
<meta name="author" content="SmartReading">
<meta name="generator" content="SmartReading">
<title>SmartReading 教師端</title>
<link rel="shortcut icon" type="image/x-icon" href="Content/images/favicon.ico">
<!-- google fonts -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans:ital,wght@0,100..900;1,100..900&family=Noto+Sans+TC:wght@100..900&display=swap" rel="stylesheet">

<!-- widgets CSS -->
<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/all.min.css">
<link rel="stylesheet" type="text/css" href="Content/widgets/DataTables/datatables.min.css">

<!-- template CSS -->
<link rel="stylesheet" type="text/css" href="Content/css/bootstrap-custom.css">
<link rel="stylesheet" type="text/css" href="Content/css/SRv3-manager.css">
</head>

<body>
<div> 
  <!-- banner start -->
  <div class="page-banner myStudy">
    <div class="container">
      <div class="page-banner__text">
        <div class="row">
          <div class="col">
            <h1>批閱我的書房</h1>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- banner end --> 
  
  <!-- myStudy start -->
  <div class="myStudy">
    <div class="container-fluid">
      <div class="myStudy-block note">
        <div class="row g-2">
          <div class="col-lg-2">
            <div class="myStudy-title">
              <h2>筆記本</h2>
            </div>
          </div>
          <div class="col-lg-7">
            <div class="myStudy-content">
              <textarea class="form-control rounded-0" placeholder="快將你的感動或觀察，化為文字記錄下來吧！......" disabled readonly>把我的感動或觀察，化為文字記錄下來！把我的感動或觀察，化為文字記錄下來！把我的感動 或觀察，化為文字記錄下來！把我的感動或觀察</textarea>
            </div>
          </div>
          <div class="col-lg-3">
            <div class="myStudy-teacher-title">教師評量</div>
            <div class="myStudy-teacher-score">分數：
              <select class="assessment-select">
                <option selected disabled>請選擇</option>
                <option value="A"  data-content="<span class='userScore byTeacher passed'>A</span>">A</option>
                <option value="A+" data-content="<span class='userScore byTeacher passed'>A+</span>">A+</option>
                <option value="B"  data-content="<span class='userScore byTeacher failed'>B</span>">B</option>
              </select>
            </div>
            <div class="myStudy-teacher-comments">
              <div class="myStudy-teacher-comments__title">評語：</div>
              <textarea class="form-control rounded-0" placeholder=""></textarea>
            </div>
          </div>
        </div>
      </div>
      <div class="myStudy-block paint">
        <div class="row g-2">
          <div class="col-lg-2">
            <div class="myStudy-title">
              <h2>繪畫</h2>
            </div>
          </div>
          <div class="col-lg-7">
            <div class="myStudy-content"> 
              <!-- -->
              <div class="upload-pic">
                <div class="upload-pic__area">
                  <div class="upload-pic__area-default">
                    <div class="upload-pic__area-default__text">快將你的感動或觀察化為圖畫記錄下來吧<img src="Content/images/myStudy/paint-default-img.png"> </div>
                  </div>
                  <div class="upload-pic__area-answer" style="display:none;"> <img src="https://smartreading.net/v3/Content/images/news/announce_20250909.jpg"> </div>
                </div>
              </div>
              <!-- --> 
            </div>
          </div>
          <div class="col-lg-3">
            <div class="myStudy-teacher-title">教師評量</div>
            <div class="myStudy-teacher-score">分數：
              <select class="assessment-select">
                <option selected disabled>請選擇</option>
                <option value="A"  data-content="<span class='userScore byTeacher passed'>A</span>">A</option>
                <option value="A+" data-content="<span class='userScore byTeacher passed'>A+</span>">A+</option>
                <option value="B"  data-content="<span class='userScore byTeacher failed'>B</span>">B</option>
              </select>
            </div>
            <div class="myStudy-teacher-comments">
              <div class="myStudy-teacher-comments__title">評語：</div>
              <textarea class="form-control rounded-0" placeholder=""></textarea>
            </div>
          </div>
        </div>
      </div>
      <div class="myStudy-block audio">
        <div class="row g-2">
          <div class="col-lg-2">
            <div class="myStudy-title">
              <h2>錄音</h2>
            </div>
          </div>
          <div class="col-lg-7">
            <div class="myStudy-content"> 
              <!-- -->
              <div class="audioRecord">
                <div class="audioRecord-penal">
                  <div class="progress-progress"> <img src="Content/images/myStudy/audioProgress/sec-60/0.png"> </div>
                  <div class="progress-effect"> <img src="Content/images/myStudy/audioProgress/effect1.png"> </div>
                  <div class="progress-count">
                    <label id="label_time">00:00</label>
                  </div>
                </div>
                <div class="audioRecord-tool">
                  <button id="btn_startRec" class="tools__btn startRec" type="button"><i class="fa-solid fa-microphone" aria-hidden="true"></i>開始錄音</button>
                  <button id="btn_stopRec" class="tools__btn stopRec" type="button" style="display:none;"><i class="fa-solid fa-circle-stop" aria-hidden="true"></i>停止錄音</button>
                  <button id="btn_startPlay" class="tools__btn playRec" type="button" ><i class="fa-solid fa-play" aria-hidden="true"></i>播放錄音</button>
                  <button id="btn_stopPlay" class="tools__btn stopPlayRec" type="button" style="display:none;"><i class="fa-solid fa-stop" aria-hidden="true"></i>停止播放</button>
                </div>
              </div>
              <!-- --> 
            </div>
          </div>
          <div class="col-lg-3">
            <div class="myStudy-teacher-title"> 教師評量 </div>
            <div class="myStudy-teacher-score"> 分數：
              <select class="assessment-select">
                <option selected disabled>請選擇</option>
                <option value="A"  data-content="<span class='userScore byTeacher passed'>A</span>">A</option>
                <option value="A+" data-content="<span class='userScore byTeacher passed'>A+</span>">A+</option>
                <option value="B"  data-content="<span class='userScore byTeacher failed'>B</span>">B</option>
              </select>
            </div>
            <div class="myStudy-teacher-comments">
              <div class="myStudy-teacher-comments__title"> 評語： </div>
              <textarea class="form-control rounded-0" placeholder=""></textarea>
            </div>
          </div>
        </div>
      </div>
      <div class="myStudy-block video">
        <div class="row g-2">
          <div class="col-lg-2">
            <div class="myStudy-title">
              <h2>影片</h2>
            </div>
          </div>
          <div class="col-lg-7">
            <div class="myStudy-content"> 
              <!-- -->
              <div class="upload-video">
                <div class="upload-video__area">
                  <div class="upload-video__area-default">
                    <div class="upload-video__area-default__text">快將你的感動或觀察，化為影像記錄下來吧！<img src="Content/images/myStudy/video-default-img.png"> </div>
                  </div>
                  <div class="upload-video__area-answer" style="display: block;">
                    <div class="upload-video__area-answer__videoWidth">
                      <div class="ratio ratio-16x9">
                        <iframe src="https://www.youtube.com/embed/rp-FAlPNQIA" title="臺師大SmartReading適性閱讀-親子篇" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="upload-video__btns">
                  <div class="input-group">
                    <input type="text" class="form-control rounded-0" placeholder="https://www.youtube.com/embed/rp-FAlPNQIA">
                    <button class="btn btn-light rounded-0 text-primary border-gray-400" type="button" id="">複製</button>
                  </div>
                </div>
              </div>
              <!-- --> 
            </div>
          </div>
          <div class="col-lg-3">
            <div class="myStudy-teacher-title">教師評量</div>
            <div class="myStudy-teacher-score">分數：
              <select class="assessment-select">
                <option selected disabled>請選擇</option>
                <option value="A"  data-content="<span class='userScore byTeacher passed'>A</span>">A</option>
                <option value="A+" data-content="<span class='userScore byTeacher passed'>A+</span>">A+</option>
                <option value="B"  data-content="<span class='userScore byTeacher failed'>B</span>">B</option>
              </select>
            </div>
            <div class="myStudy-teacher-comments">
              <div class="myStudy-teacher-comments__title">評語：</div>
              <textarea class="form-control rounded-0" placeholder=""></textarea>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- myStudy start --> 
  
  <!-- -->
  <div class="myStudy-footer">
    <div class="container">
      <button type="button" class="btn btn-outline-primary m-1" id="modalCancel">取消</button>
      <button type="button" class="btn btn-primary m-1" id="modalConfirm">確定</button>
    </div>
  </div>
  <!-- --> 
</div>
<script>
$('#modalCancel').click(function(){ 
	$('#reviewModal').modal('hide');
});

$('#modalConfirm').click(function(){
	//do something ...
	
	$('#reviewModal').modal('hide');
});
	
//audio 錄音
var t = 0;          
var tTimer = null;  
var n = 0;          
var nTimer = null;

var recordedSeconds = 0; 

//計時器數字
function updateTimeUI(sec) {
    let ss = sec < 10 ? "0" + sec : sec;
    $('#label_time').text("00:" + ss);
}

//圓餅圖
function updateCircleImage(sec) {
    $('.progress-progress > img').attr('src',
        'Content/images/myStudy/audioProgress/sec-60/' + sec + '.png'
    );
}
	
//聲音效果動畫
function listenTime() {
    n++;
    $('.progress-effect > img').attr('src',
        'Content/images/myStudy/audioProgress/effect' + n + '.png'
    );

    nTimer = setTimeout(listenTime, 500);

    if (n === 2) n = 0;
}	

//正向—錄音計時
function countTimeForward() {
    if (t < 60) {
        updateTimeUI(t);
        updateCircleImage(t);

        t++;
        tTimer = setTimeout(countTimeForward, 1000);
    } else {
        stopRecordAction(); 
    }
}

//倒數—播放計時
function countTimeBackward() {
    if (t > 0) {
        updateTimeUI(t);
        updateCircleImage(t);

        t--;
        tTimer = setTimeout(countTimeBackward, 1000);
    } else {
        stopPlayAction(); 
    }
}

//停止所有 timer
function clearAllTimers() {
    clearTimeout(tTimer);
    clearTimeout(nTimer);
}

//停止錄音
function stopRecordAction() {
    clearAllTimers();

    //記錄實際錄到的秒數（t 已經在該秒停止了）
    recordedSeconds = t > 60 ? 60 : t;

    $('#btn_stopRec').hide();
    $('#btn_startRec').show();
}

// 停止播放
function stopPlayAction() {
    clearAllTimers();

    $('#btn_stopPlay').hide();
    $('#btn_startPlay').show();
}

//[開始錄音]
$('#btn_startRec').click(function () {
    t = 0;
    n = 0;

    countTimeForward();
    listenTime();

    $(this).hide();
    $('#btn_stopRec').show();
});

//[停止錄音]
$('#btn_stopRec').click(function () {
    stopRecordAction();
});

//[開始播放]（倒數）
$('#btn_startPlay').click(function () {
    //從「錄到的秒數」開始播放
    if (recordedSeconds === 0) {
        // 若沒有錄（或還沒按過錄音）
        recordedSeconds = 60; 
    }

    t = recordedSeconds;
    n = 0;

    updateTimeUI(t);
    updateCircleImage(t);

    countTimeBackward();
    listenTime();

    $(this).hide();
    $('#btn_stopPlay').show();
});

// [停止播放]
$('#btn_stopPlay').click(function () {
    stopPlayAction();
});
	
//demo
let demoSec = 37;
updateTimeUI(demoSec);
updateCircleImage(demoSec);
	
recordedSeconds = demoSec;
	
$('#btn_startRec').prop("disabled", true);
$('#btn_stopRec').prop("disabled", true);	
</script>
</body>
</html>
